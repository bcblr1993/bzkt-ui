var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,s=(t,r,o)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[r]=o;import{i,u as l,a as c,d,T as u,l as p,b as m,c as _,r as f,o as h,e as E,w as b,K as g,f as L,g as P,h as y,j as T,L as j}from"./vendor.986fff3c.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const v=Symbol("store");const w=function(){const e=l("[bzkt]: baseURL",""),t=l("[bzkt]: token",""),r=ref(null),o={state:reactive({baseURL:e,updateBaseURL:t=>{e.value=t},token:t,updateToken:e=>{t.value=e},personal:r,updatePersonal:e=>{r.value=e}}),install(e){e.provide(v,o)}};return o}();function O(){return i(v)}const R=c.create({baseURL:w.state.baseURL});function I(e){return R({url:"/tokens",method:"POST",data:e})}function V(){return R({url:"/token",method:"DELETE"})}function A(e){return R({method:"PATCH",url:"/user",data:e})}function D(e){return R({method:"GET",url:"/user/played",params:e})}function k(e){return R({method:"GET",url:"/user/favorites",params:e})}function U(){return R({method:"GET",url:"/user/following"})}function C(){return R({method:"GET",url:"/user/followers"})}function x(e){return R({method:"PUT",url:`/user/following/${e}`})}function H(e){return R({method:"DELETE",url:`/user/following/${e}`})}d((()=>w.state.baseURL),(e=>{R.defaults.baseURL=e,console.log(p("[api base url]: ")+m(R.defaults.baseURL))}),{immediate:!0,debounce:250}),R.interceptors.request.use((e=>{var t;e=null!=e?e:{};const r=w.state.token;return""!==r&&(e.params=null!=(t=e.params)?t:{},e.params.token=r),e})),R.interceptors.response.use((e=>{const t=e.data;if(e.status>=500&&!t.err_msg)return Promise.reject(new Error(e.statusText));if("object"==typeof(r=t)&&null!==r&&"err_code"in r&&"err_msg"in r&&"number"==typeof r.err_code&&"string"==typeof r.err_msg){if("提示: 无效token!"===t.err_msg){localStorage.setItem("[bzkt]: token","");const e="身份验证已过期,请重新登录";return u.fail(e),Promise.reject(new Error(e))}return u.fail(t.err_msg),Promise.reject(new Error(t.err_msg))}var r;return e}),(e=>{if(e.message){const t=e.message;t.startsWith("timeout of")&&u.fail("请求超时"),t.startsWith("Network Error")&&u.fail("网络异常")}return Promise.reject(e)}));const S=defineComponent({name:"App"});var F,z=_((F=((e,t)=>{for(var r in t||(t={}))n.call(t,r)&&s(e,r,t[r]);if(o)for(var r of o(t))a.call(t,r)&&s(e,r,t[r]);return e})({},S),t(F,r({setup(e){const t=O();return watch((()=>t.state.token),(e=>{0===e.length?t.state.updatePersonal(null):R({url:"/user"}).then((e=>{t.state.updatePersonal(e.data)})).catch((()=>{t.state.updateToken("")}))}),{immediate:!0}),(e,t)=>{const r=f("router-view");return h(),E(r,null,{default:b((({Component:e})=>[(h(),E(g,{include:"Layout"},[(h(),E(L(e)))],1024))])),_:1})}}}))));const q={},$=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`/${e}`)in q)return;q[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":"modulepreload",t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise(((e,t)=>{o.addEventListener("load",e),o.addEventListener("error",t)})):void 0}))).then((()=>e())):e()},G=()=>$((()=>import("./index.43ea8b35.js")),["assets/index.43ea8b35.js","assets/index.3f1f90e9.css","assets/index.36abdde3.css","assets/vendor.986fff3c.js","assets/vendor.8f316cc5.css","assets/NavBarIcon.ebe36479.js","assets/NavBarIcon.981e7077.css"]),N=[{path:"/login",name:"Login",component:()=>$((()=>import("./Login.4dc1484a.js")),["assets/Login.4dc1484a.js","assets/Login.19fda8d3.css","assets/index.36abdde3.css","assets/index.816f8f6b.css","assets/vendor.986fff3c.js","assets/vendor.8f316cc5.css","assets/NavBarIcon.ebe36479.js","assets/NavBarIcon.981e7077.css","assets/PhoneForm.dd05fa92.js","assets/PhoneForm.a858198c.css","assets/sleep.d3439312.js"])},{path:"/",component:G,children:[{path:"",name:"Home",component:()=>$((()=>import("./index.1372ec63.js")),["assets/index.1372ec63.js","assets/index.ff1f3e8f.css","assets/index.41d8c28a.css","assets/index.f6669bc2.css","assets/video.1ccd3c39.js","assets/useFixVanList.05be6005.js","assets/vendor.986fff3c.js","assets/vendor.8f316cc5.css","assets/index.module.42bc8fe5.js","assets/index.module.0e86d7a8.css"]),meta:{showHeader:true,showTabbar:true,title:"首页"}}]},{path:"/search",name:"Search",component:()=>$((()=>import("./Search.33b6e293.js")),["assets/Search.33b6e293.js","assets/index.41d8c28a.css","assets/index.8cd774ab.css","assets/index.00574f0f.css","assets/index.01291678.css","assets/index.f6669bc2.css","assets/video.1ccd3c39.js","assets/VideoRow.c652b15f.js","assets/VideoRow.f8fe71e1.css","assets/useTimeFormat.cdd45634.js","assets/dayjs.1e2967e1.js","assets/vendor.986fff3c.js","assets/vendor.8f316cc5.css","assets/useFixVanList.05be6005.js"])},{path:"/upload-video",name:"UploadVideo",component:()=>$((()=>import("./UploadVideo.0c4bc69a.js")),["assets/UploadVideo.0c4bc69a.js","assets/UploadVideo.497fbe36.css","assets/index.816f8f6b.css","assets/index.8cd774ab.css","assets/index.00574f0f.css","assets/index.36abdde3.css","assets/index.f6669bc2.css","assets/index.3895b6c3.css","assets/index.44e154e6.css","assets/index.906830b1.css","assets/category.7feefb6e.js","assets/video.1ccd3c39.js","assets/vendor.986fff3c.js","assets/vendor.8f316cc5.css","assets/sleep.d3439312.js"]),meta:{requiresLogin:!0}},{path:"/category",component:G,children:[{path:"",name:"Category",component:()=>$((()=>import("./index.aa42a6f3.js")),["assets/index.aa42a6f3.js","assets/index.a5ef6597.css","assets/index.f6669bc2.css","assets/vendor.986fff3c.js","assets/vendor.8f316cc5.css","assets/category.7feefb6e.js"]),meta:{showHeader:true,showTabbar:true,title:"分类"}}]},{path:"/categorized-videos",name:"CategorizedVideos",component:()=>$((()=>import("./CategorizedVideos.082608ba.js")),["assets/CategorizedVideos.082608ba.js","assets/index.41d8c28a.css","assets/index.36abdde3.css","assets/index.f6669bc2.css","assets/category.7feefb6e.js","assets/video.1ccd3c39.js","assets/NavBarIcon.ebe36479.js","assets/NavBarIcon.981e7077.css","assets/vendor.986fff3c.js","assets/vendor.8f316cc5.css","assets/VideoRow.c652b15f.js","assets/VideoRow.f8fe71e1.css","assets/useTimeFormat.cdd45634.js","assets/dayjs.1e2967e1.js","assets/useFixVanList.05be6005.js"]),props:e=>({categoryId:e.query.category})},{path:"/feed",component:G,children:[{path:"",name:"Feed",component:()=>$((()=>import("./index.918fbec0.js")),["assets/index.918fbec0.js","assets/index.fc087f99.css","assets/index.41d8c28a.css","assets/index.f6669bc2.css","assets/index.3895b6c3.css","assets/index.44e154e6.css","assets/feed.1305fc25.js","assets/useFixVanList.05be6005.js","assets/vendor.986fff3c.js","assets/vendor.8f316cc5.css","assets/index.module.42bc8fe5.js","assets/index.module.0e86d7a8.css","assets/dayjs.1e2967e1.js"]),meta:{showHeader:true,showTabbar:true,title:"动态",needLogin:!0}}]},{path:"/feed/create",name:"CreateFeed",component:()=>$((()=>import("./CreateFeed.db9ecf57.js")),["assets/CreateFeed.db9ecf57.js","assets/CreateFeed.0e5b42c9.css","assets/index.8cd774ab.css","assets/index.00574f0f.css","assets/index.36abdde3.css","assets/index.f6669bc2.css","assets/index.3895b6c3.css","assets/index.44e154e6.css","assets/index.906830b1.css","assets/vendor.986fff3c.js","assets/vendor.8f316cc5.css","assets/feed.1305fc25.js"]),meta:{needLogin:!0}},{path:"/personal",component:G,children:[{path:"",name:"Personal",component:()=>$((()=>import("./index.adfee528.js")),["assets/index.adfee528.js","assets/index.01412765.css","assets/index.816f8f6b.css","assets/index.8cd774ab.css","assets/index.5968fe57.css","assets/index.f6669bc2.css","assets/vendor.986fff3c.js","assets/vendor.8f316cc5.css"]),meta:{showHeader:true,showTabbar:true,title:"我的"}}]},{path:"/personal/edit",name:"EditPersonal",component:()=>$((()=>import("./EditPersonal.7cb52be1.js")),["assets/EditPersonal.7cb52be1.js","assets/EditPersonal.6d03bc7f.css","assets/index.816f8f6b.css","assets/index.8cd774ab.css","assets/index.5968fe57.css","assets/index.00574f0f.css","assets/index.f6669bc2.css","assets/index.36abdde3.css","assets/vendor.986fff3c.js","assets/vendor.8f316cc5.css","assets/NavBarIcon.ebe36479.js","assets/NavBarIcon.981e7077.css","assets/PhoneForm.dd05fa92.js","assets/PhoneForm.a858198c.css","assets/sleep.d3439312.js"]),meta:{needLogin:!0}},{path:"/personal/my-videos",name:"MyVideos",component:()=>$((()=>import("./Video.3d41ebcc.js")),["assets/Video.3d41ebcc.js","assets/index.41d8c28a.css","assets/index.36abdde3.css","assets/index.f6669bc2.css","assets/video.1ccd3c39.js","assets/NavBarIcon.ebe36479.js","assets/NavBarIcon.981e7077.css","assets/vendor.986fff3c.js","assets/vendor.8f316cc5.css","assets/VideoRow.c652b15f.js","assets/VideoRow.f8fe71e1.css","assets/useTimeFormat.cdd45634.js","assets/dayjs.1e2967e1.js","assets/useFixVanList.05be6005.js"]),meta:{needLogin:!0}},{path:"/personal/history",name:"History",component:()=>$((()=>import("./History.d08691b4.js")),["assets/History.d08691b4.js","assets/index.41d8c28a.css","assets/index.36abdde3.css","assets/index.f6669bc2.css","assets/NavBarIcon.ebe36479.js","assets/NavBarIcon.981e7077.css","assets/vendor.986fff3c.js","assets/vendor.8f316cc5.css","assets/VideoRow.c652b15f.js","assets/VideoRow.f8fe71e1.css","assets/useTimeFormat.cdd45634.js","assets/dayjs.1e2967e1.js","assets/useFixVanList.05be6005.js"]),meta:{needLogin:!0}},{path:"/personal/favorite",name:"Favorite",component:()=>$((()=>import("./Favorite.0dd74f2a.js")),["assets/Favorite.0dd74f2a.js","assets/index.41d8c28a.css","assets/index.36abdde3.css","assets/index.f6669bc2.css","assets/NavBarIcon.ebe36479.js","assets/NavBarIcon.981e7077.css","assets/vendor.986fff3c.js","assets/vendor.8f316cc5.css","assets/VideoRow.c652b15f.js","assets/VideoRow.f8fe71e1.css","assets/useTimeFormat.cdd45634.js","assets/dayjs.1e2967e1.js","assets/useFixVanList.05be6005.js"]),meta:{needLogin:!0}},{path:"/personal/follow",name:"Follow",component:()=>$((()=>import("./Follow.5404af83.js")),["assets/Follow.5404af83.js","assets/Follow.905d32f8.css","assets/index.f6669bc2.css","assets/index.36abdde3.css","assets/index.15173a0a.css","assets/index.3895b6c3.css","assets/vendor.986fff3c.js","assets/vendor.8f316cc5.css","assets/NavBarIcon.ebe36479.js","assets/NavBarIcon.981e7077.css"]),meta:{needLogin:!0}},{path:"/videos/:videoId",name:"Video",component:()=>$((()=>import("./index.d08d70b2.js")),["assets/index.d08d70b2.js","assets/index.b6493320.css","assets/index.36abdde3.css","assets/index.15173a0a.css","assets/index.3895b6c3.css","assets/index.816f8f6b.css","assets/index.f6669bc2.css","assets/index.41d8c28a.css","assets/index.8cd774ab.css","assets/index.00574f0f.css","assets/index.01291678.css","assets/video.1ccd3c39.js","assets/vendor.986fff3c.js","assets/vendor.8f316cc5.css","assets/useTimeFormat.cdd45634.js","assets/dayjs.1e2967e1.js","assets/NavBarIcon.ebe36479.js","assets/NavBarIcon.981e7077.css"]),props:e=>({videoId:e.params.videoId})},{path:"/config",component:()=>$((()=>import("./Config.a5b54737.js")),["assets/Config.a5b54737.js","assets/Config.0a93dd4f.css","assets/index.5968fe57.css","assets/index.8cd774ab.css","assets/index.00574f0f.css","assets/vendor.986fff3c.js","assets/vendor.8f316cc5.css"])}],M=P({history:y(),routes:N});u.allowMultiple(!0);const W=T(z);W.use(M).use(w).use(j),W.mount("#app");export{A as a,D as b,k as c,C as d,U as e,x as f,H as g,V as l,R as r,I as s,O as u};
