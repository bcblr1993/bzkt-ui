import{b as e}from"./index.764959f2.js";import{_ as a}from"./NavBarIcon.ebe36479.js";import{_ as s}from"./VideoRow.c652b15f.js";import{u as o,a as i}from"./useFixVanList.05be6005.js";import{c as t,o as r,n,s as l,w as c,q as d,N as u,D as p,F as f,M as m,O as v,e as j}from"./vendor.986fff3c.js";/* empty css              *//* empty css              */import"./useTimeFormat.cdd45634.js";import"./dayjs.1e2967e1.js";/* empty css              */const g={class:"container"},b={class:"video-list"};var k=t({setup(t){const k=o(),x=ref([]),_=reactive({page:1,per_page:10}),h=ref(!1),w=ref(!1),y=async(a=!1)=>{let s;try{s=await e({page:_.page,per_page:_.per_page})}catch(i){return void console.error(i)}const o=s.data;x.value=a?x.value.concat(o):o,w.value=o.length<_.per_page},V=async()=>{!0!==h.value&&!0!==w.value&&(h.value=!0,_.page++,await y(!0),await nextTick(),h.value=!1)};onBeforeMount((async()=>{await y()}));const C=ref();return i(C),(e,o)=>(r(),n("div",g,[l(d(u),{title:"历史",onClickLeft:o[0]||(o[0]=a=>e.$router.back())},{left:c((()=>[l(a,{name:"back"})])),_:1}),l(d(v),{ref:C,modelValue:h.value,"onUpdate:modelValue":o[1]||(o[1]=e=>h.value=e),class:"list-container","immediate-check":!1,finished:w.value,"finished-text":"没有更多了",onLoad:V},{default:c((()=>[p("div",b,[(r(!0),n(f,null,m(x.value,(e=>(r(),j(s,{key:e.id,video:e,onClick:a=>d(k)(e.id)},null,8,["video","onClick"])))),128))])])),_:1},8,["modelValue","finished"])]))}});export{k as default};
