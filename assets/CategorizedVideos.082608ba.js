var e=Object.defineProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(a,r,t)=>r in a?e(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t;import{g as i}from"./category.7feefb6e.js";import{l as s}from"./video.1ccd3c39.js";import{_ as l}from"./NavBarIcon.ebe36479.js";import{_ as c}from"./VideoRow.c652b15f.js";import{u as n,a as d}from"./useFixVanList.05be6005.js";import{c as u,o as p,n as f,s as m,w as v,q as y,N as b,D as j,F as g,M as w,O as h,e as k}from"./vendor.986fff3c.js";/* empty css              *//* empty css              */import"./index.764959f2.js";import"./useTimeFormat.cdd45634.js";import"./dayjs.1e2967e1.js";/* empty css              */const x={class:"container"},O={class:"video-list"};var I=u({props:{categoryId:{type:String,required:!0}},setup(e){const u=e,I=n(),_=ref(null),V=ref([]),C=reactive({page:1,per_page:10}),F=ref(!1),L=ref(!1),P=async(e=!1)=>{let i;try{i=await s(((e,i)=>{for(var s in i||(i={}))r.call(i,s)&&o(e,s,i[s]);if(a)for(var s of a(i))t.call(i,s)&&o(e,s,i[s]);return e})({category:u.categoryId},C))}catch(c){return void console.error(c)}const l=i.data;V.value=e?V.value.concat(l):l,L.value=l.length<C.per_page},q=async()=>{!0!==F.value&&(F.value=!0,C.page++,await P(!0),await nextTick(),F.value=!1)};watch((()=>u.categoryId),(async()=>{await(async()=>{let e;try{e=await i(u.categoryId)}catch(a){return void console.error(a)}_.value=e.data})(),await P()}),{immediate:!0});const N=ref();return d(N),(e,a)=>{var r,t;return p(),f("div",x,[m(y(b),{title:null!=(t=null==(r=_.value)?void 0:r.name)?t:"",onClickLeft:a[0]||(a[0]=a=>e.$router.back())},{left:v((()=>[m(l,{name:"back"})])),_:1},8,["title"]),m(y(h),{ref:N,modelValue:F.value,"onUpdate:modelValue":a[1]||(a[1]=e=>F.value=e),class:"list-container","immediate-check":!1,finished:L.value,"finished-text":"没有更多了",onLoad:q},{default:v((()=>[j("div",O,[(p(!0),f(g,null,w(V.value,(e=>(p(),k(c,{key:e.id,video:e,onClick:a=>y(I)(e.id)},null,8,["video","onClick"])))),128))])])),_:1},8,["modelValue","finished"])])}}});export{I as default};
