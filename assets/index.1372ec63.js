var e=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,t=(a,o,s)=>o in a?e(a,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[o]=s,r=(e,a)=>{for(var o in a||(a={}))i.call(a,o)&&t(e,o,a[o]);if(s)for(var o of s(a))l.call(a,o)&&t(e,o,a[o]);return e},c=(e,s)=>a(e,o(s));import{g as d}from"./video.1ccd3c39.js";import{u as n,a as v}from"./useFixVanList.05be6005.js";import{u,l as p}from"./index.module.42bc8fe5.js";import{c as f,o as _,n as m,s as y,x as g,q as k,J as b,D as j,G as x,I as w,e as I,w as $,M as O,F as C,O as h,Q as L}from"./vendor.986fff3c.js";/* empty css              *//* empty css              */import"./index.764959f2.js";var T=f(c(r({},defineComponent({name:"VideoCard"})),{props:{video:{type:null,required:!0}},emits:["click"],setup(e,{emit:a}){const o=e=>{a("click",e)};return(a,s)=>(_(),m("div",{class:g(a.$style.cardWrapper),onClick:o},[y(k(b),{class:g(a.$style.videoCover),fit:"contain",src:e.video.cover},null,8,["class","src"]),j("div",{class:g(a.$style.videoIntro)},[j("div",{class:g(a.$style.videoTitle)},x(e.video.title),3),j("div",{class:g(a.$style.videoInfo)},[j("div",{class:g(a.$style.videoTag)},x(e.video.category),3),j("div",{class:g(a.$style.videoLikes)},[y(k(w),{class:g(a.$style.likesIcon),name:"good-job-o"},null,8,["class"]),j("div",null,x(e.video.likes),1)],2)],2)],2)],2))}}));var P={cardWrapper:"_cardWrapper_1ceea_2",videoCover:"_videoCover_1ceea_12",videoIntro:"_videoIntro_1ceea_18",videoTitle:"_videoTitle_1ceea_22",videoInfo:"_videoInfo_1ceea_35",videoTag:"_videoTag_1ceea_42",videoLikes:"_videoLikes_1ceea_50",likesIcon:"_likesIcon_1ceea_60"};(T.__cssModules={}).$style=P;var V=f(c(r({},defineComponent({name:"Home"})),{setup(e){const a=n(),o=ref([]),s=reactive({page:1,per_page:10}),i=ref(!1),l=ref(!1),t=ref(!1),r=async(e=!1)=>{let a;try{a=await d(s)}catch(l){return void console.error(l)}const i=a.data;o.value=e?o.value.concat(i):i,t.value=i.length<s.per_page},c=async()=>{!0!==t.value&&(l.value=!0,s.page++,await r(!0),await nextTick(),l.value=!1)},f=async()=>{s.page=1,t.value=!1,await r(),await nextTick(),i.value=!1};onBeforeMount((async()=>{await r()})),u();const b=ref();return v(b),(e,s)=>(_(),I(k(L),{modelValue:i.value,"onUpdate:modelValue":s[1]||(s[1]=e=>i.value=e),onRefresh:f},{default:$((()=>[y(k(h),{ref:b,loading:l.value,"onUpdate:loading":s[0]||(s[0]=e=>l.value=e),class:g(k(p)),"immediate-check":!1,finished:t.value,"finished-text":"没有更多了",onLoad:c},{default:$((()=>[j("div",{class:g([e.$style.videoList,"van-clearfix"])},[(_(!0),m(C,null,O(o.value,(e=>(_(),I(T,{key:e.id,video:e,onClick:o=>k(a)(e.id)},null,8,["video","onClick"])))),128))],2)])),_:1},8,["loading","class","finished"])])),_:1},8,["modelValue"]))}}));var M={videoList:"_videoList_fxcs2_2"};(V.__cssModules={}).$style=M;export{V as default};
