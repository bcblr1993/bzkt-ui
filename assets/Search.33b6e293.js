var e=Object.defineProperty,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,t=(a,r,o)=>r in a?e(a,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[r]=o;import{s as i}from"./video.1ccd3c39.js";import{_ as l}from"./VideoRow.c652b15f.js";import{u as s,a as n}from"./useFixVanList.05be6005.js";import{c,o as d,n as u,s as p,q as f,X as m,w as v,F as j,M as b,O as y,T as h,e as w}from"./vendor.986fff3c.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./index.764959f2.js";import"./useTimeFormat.cdd45634.js";import"./dayjs.1e2967e1.js";/* empty css              */const x={class:"container"};var g=c({setup(e){const c=s(),g=ref([]),k=ref(""),V=reactive({page:0,per_page:10}),O=ref(!1),T=ref(!1),_=async(e=!1)=>{if(""===k.value)return;const l=h.loading("加载中...");let s;try{s=await i(((e,i)=>{for(var l in i||(i={}))r.call(i,l)&&t(e,l,i[l]);if(a)for(var l of a(i))o.call(i,l)&&t(e,l,i[l]);return e})({q:k.value},V))}catch(c){return console.error(c),void l.clear()}const n=s.data.items;g.value=e?g.value.concat(n):n,T.value=n.length<V.per_page,l.clear()},C=async()=>{V.page=1,T.value=!1,await _(),await nextTick()},F=async()=>{!0!==O.value&&(O.value=!0,V.page++,await _(!0),await nextTick(),O.value=!1)},P=ref();return n(P),(e,a)=>(d(),u("div",x,[p(f(m),{modelValue:k.value,"onUpdate:modelValue":a[0]||(a[0]=e=>k.value=e),"show-action":"",shape:"round",background:"#eeeeee",placeholder:"请输入搜索关键词",onSearch:C,onCancel:a[1]||(a[1]=a=>e.$router.back())},null,8,["modelValue"]),p(f(y),{ref:P,modelValue:O.value,"onUpdate:modelValue":a[2]||(a[2]=e=>O.value=e),class:"search-result-container","immediate-check":!1,finished:T.value,"finished-text":"没有更多了",onLoad:F},{default:v((()=>[(d(!0),u(j,null,b(g.value,(e=>(d(),w(l,{key:e.id,video:e,onClick:a=>f(c)(e.id)},null,8,["video","onClick"])))),128))])),_:1},8,["modelValue","finished"])]))}});export{g as default};
